<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pay here for deposit</title>
  <style>
    :root { --bg: #f7f7f8; --card: #ffffff; --text: #111827; }
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial}
    body{display:flex;align-items:center;justify-content:center;background:var(--bg);color:var(--text)}
    .container{width:100%;max-width:680px;padding:40px;text-align:center}
    h1{margin:0;font-size:2.2rem;font-weight:600}
    .note{margin-top:12px;color:#6b7280;font-size:0.95rem}
    .card{background:var(--card);padding:40px;border-radius:20px;box-shadow:0 8px 20px rgba(0,0,0,0.07);}
    .pay-box{margin-top:25px;padding:20px;border:2px dashed #d1d5db;border-radius:16px;background:#fafafa;}
    .muted{color:#6b7280;font-size:0.9rem}
    .error{color:#b91c1c;margin-top:10px}
  </style>
  <!-- Load PayPal SDK and call initPayPal once loaded -->
  <script
    src="https://www.paypal.com/sdk/js?client-id=BAAuFyKVTOm4cbxeFZhpHlLSjJmOMerx9tQ1ua3QdYGonrrvXE379al7IUWFlHQSWcvvP4H6is31-Vqzl0&currency=USD"
    onload="initPayPal()"
    onerror="console.error('PayPal SDK failed to load')"
  ></script>
</head>
<body>
  <main class="container">
    <div class="card">
      <h1>Pay Here for Deposit</h1>
      <p class="note">Secure checkout via PayPal</p>

      <div class="pay-box">
        <!-- Container where PayPal Buttons will render -->
        <div id="paypal-container-3UFE9CKXSJRQA"></div>
        <div id="paypal-error" class="error" aria-live="polite" style="display:none"></div>
        <p class="muted">Default deposit amount: <strong id="deposit-amount">$10.00</strong></p>
      </div>
    </div>
  </main>

  <script>
    // Default deposit amount (change as needed)
    const DEPOSIT_AMOUNT = '10.00';

    // initPayPal is called when the SDK script finishes loading (via onload attribute)
    function initPayPal() {
      try {
        if (!window.paypal) {
          showError('PayPal SDK not available.');
          return;
        }

        // Render PayPal Buttons. Using paypal.Buttons instead of HostedButtons.
        paypal.Buttons({
          style: {
            layout: 'vertical',
            color:  'blue',
            shape:  'rect',
            label:  'pay'
          },

          // createOrder creates the transaction with the deposit amount
          createOrder: function(data, actions) {
            return actions.order.create({
              purchase_units: [{
                amount: { value: DEPOSIT_AMOUNT }
              }]
            });
          },

          // onApprove captures the funds and shows a simple message
          onApprove: function(data, actions) {
            return actions.order.capture().then(function(details) {
              alert('Transaction completed by ' + (details.payer.name && details.payer.name.given_name ? details.payer.name.given_name : 'the payer') + '.');
            });
          },

          onError: function(err) {
            console.error('PayPal Buttons error', err);
            showError('An error occurred while initializing the payment. See console for details.');
          }
        }).render('#paypal-container-3UFE9CKXSJRQA')
        .catch(function(err){
          console.error('Render error', err);
          showError('Could not render PayPal button.');
        });

        // update deposit amount UI
        const amt = document.getElementById('deposit-amount');
        if (amt) amt.textContent = '$' + DEPOSIT_AMOUNT;

      } catch (e) {
        console.error(e);
        showError('Unexpected error during PayPal setup.');
      }
    }

    function showError(msg) {
      const el = document.getElementById('paypal-error');
      if (el) { el.style.display = 'block'; el.textContent = msg; }
    }
  </script>
</body>
</html>